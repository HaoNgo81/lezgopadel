<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>LezGo Padel â€” Training Bank & Tournament</title>
<meta name="theme-color" content="#0f1720" id="meta-theme-color" />

<style>
/* ---------------- BASE ---------------- */
*,*::before,*::after{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:Inter,system-ui,Arial,sans-serif}
:root{
--bg:#0f1720;--bg2:#071226;--panel:#12202a;
--text:#e6eef6;--muted:#9aa7b3;--accent:#22c55e;
--border:rgba(255,255,255,.06)
}
body.light{
--bg:#d1d5db;--bg2:#cbd5e1;--panel:#e5e7eb;
--text:#0b1220;--muted:#374151;--accent:#16a34a
}
body{
background:linear-gradient(180deg,var(--bg),var(--bg2));
color:var(--text);padding-bottom:120px
}

/* ---------------- LAYOUT ---------------- */
.container{max-width:1100px;margin:0 auto;padding:10px}
header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center}
#logo{height:48px}
#top-controls{justify-self:end;display:flex;gap:8px}

/* ---------------- BUTTONS ---------------- */
.btn{padding:8px 12px;border-radius:10px;font-weight:800;border:1px solid var(--border);background:transparent;color:var(--text);cursor:pointer}
.btn-primary{background:var(--accent);color:#05261a;border:none}
.btn-ghost{color:var(--muted)}
.card{background:var(--panel);border-radius:14px;padding:14px;margin-bottom:12px}

/* ---------------- TABS ---------------- */
.tabs{display:flex;gap:8px;flex-wrap:wrap}
.tab-btn.active{background:var(--accent);color:#05261a;border:none}

/* ---------------- TOURNAMENT TYPES ---------------- */
.tournament-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
gap:12px
}
.t-card{
background:rgba(255,255,255,.06);
border-radius:14px;
padding:14px;
cursor:pointer;
border:2px solid transparent
}
.t-card.active{
border-color:var(--accent);
background:rgba(34,197,94,.15)
}
.t-card h4{margin:0 0 6px;color:#c7d2fe}
.t-card p{margin:0;font-size:13px;color:var(--muted)}

/* ---------------- FORMS ---------------- */
input,select{
width:100%;padding:10px;border-radius:10px;
border:1px solid var(--border);
background:transparent;color:var(--text)
}
label{font-size:12px;color:var(--muted)}

/* ---------------- LEADERBOARD ---------------- */
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{padding:6px;border-bottom:1px solid var(--border);text-align:center}
th:first-child,td:first-child{text-align:left}
</style>
</head>

<body>
<div class="container">

<header>
<div></div>
<img src="lezgo-logo.svg" id="logo" alt="LEZGO">
<div id="top-controls">
<button id="theme" class="btn">ðŸŒ™</button>
</div>
</header>

<!-- TABS -->
<div class="card tabs">
<button class="btn tab-btn active" data-tab="training">Training Bank</button>
<button class="btn tab-btn" data-tab="tournament">Tournament</button>
</div>

<!-- TRAINING (placeholder â€“ din eksisterende logik fortsÃ¦tter her) -->
<section id="training">
<div class="card">
<h3>Training Bank</h3>
<p style="color:var(--muted)">Din eksisterende Training Bank er bevaret.</p>
</div>
</section>

<!-- TOURNAMENT -->
<section id="tournament" style="display:none">

<!-- CREATE TOURNAMENT -->
<div class="card">
<h3>Opret turnering</h3>

<label>VÃ¦lg turneringstype</label>
<select id="tournamentTypeSelect"></select>

</div>

<!-- TOURNAMENT TYPES -->
<div class="card">
<h3>Turneringstyper</h3>

<div class="tournament-grid" id="tournamentTypes"></div>
</div>

</section>

</div>

<script>
/* ---------------- THEME ---------------- */
const themeBtn=document.getElementById("theme");
themeBtn.onclick=()=>{
document.body.classList.toggle("light");
themeBtn.textContent=document.body.classList.contains("light")?"ðŸŒž":"ðŸŒ™";
};

/* ---------------- TABS ---------------- */
document.querySelectorAll(".tab-btn").forEach(b=>{
b.onclick=()=>{
document.querySelectorAll(".tab-btn").forEach(x=>x.classList.remove("active"));
b.classList.add("active");
document.getElementById("training").style.display=b.dataset.tab==="training"?"block":"none";
document.getElementById("tournament").style.display=b.dataset.tab==="tournament"?"block":"none";
};
});

/* ---------------- TOURNAMENT TYPES DATA ---------------- */
const TYPES=[
{key:"normal_americano",title:"Normal Americano",desc:"All players plays with everyone, 1 time"},
{key:"mix_americano",title:"Mix Americano",desc:"The team is drawn with a woman and a man in each team"},
{key:"mexicano",title:"Mexicano",desc:"Matches are drawn dynamically based on the scoreboard"},
{key:"mixicano",title:"Mixicano",desc:"Like Mexicano but always mixed teams"},
{key:"super_mexicano",title:"Super Mexicano",desc:"Extra points when close to winning score"},
{key:"team_americano",title:"Team Americano",desc:"All teams play each other once"},
{key:"team_mexicano",title:"Team Mexicano",desc:"Mexicano with fixed teams"},
{key:"club_team_americano",title:"Club Team Americano",desc:"Two clubs with fixed pairs competing crosswise"}
];

const grid=document.getElementById("tournamentTypes");
const select=document.getElementById("tournamentTypeSelect");
let active=localStorage.getItem("lezgo_tournament_type")||TYPES[0].key;

/* ---------------- RENDER TYPES ---------------- */
function renderTypes(){
grid.innerHTML="";
select.innerHTML="";
TYPES.forEach(t=>{
// select
const o=document.createElement("option");
o.value=t.key;o.textContent=t.title;
if(t.key===active) o.selected=true;
select.appendChild(o);

// card
const c=document.createElement("div");
c.className="t-card"+(t.key===active?" active":"");
c.innerHTML=`<h4>${t.title}</h4><p>${t.desc}</p>`;
c.onclick=()=>{
active=t.key;
localStorage.setItem("lezgo_tournament_type",active);
renderTypes();
};
grid.appendChild(c);
});
}
select.onchange=e=>{
active=e.target.value;
localStorage.setItem("lezgo_tournament_type",active);
renderTypes();
};

renderTypes();
</script>

</body>
</html>

<script>
/* =========================================================
   LEZGO TOURNAMENT â€“ CORE LOGIC (DEL 2)
   ========================================================= */

/* ---------- STORAGE KEYS ---------- */
const TEAM_KEY = "lezgo_tournament_teams";
const MATCH_KEY = "lezgo_tournament_matches";
const SORT_KEY = "lezgo_tournament_sort";

/* ---------- STATE ---------- */
let teams = JSON.parse(localStorage.getItem(TEAM_KEY) || "[]");
let matches = JSON.parse(localStorage.getItem(MATCH_KEY) || "[]");
let sortMode = localStorage.getItem(SORT_KEY) || "wins";

/* ---------- HELPERS ---------- */
const $ = id => document.getElementById(id);
const uid = () => "id_" + Math.random().toString(36).slice(2,9);

/* ---------- INIT UI ---------- */
document.addEventListener("DOMContentLoaded", () => {
  renderTeamSelects();
  renderTeamList();
  renderLeaderboard();
});

/* =========================================================
   TEAMS
   ========================================================= */
function addTeam(name){
  if(!name) return;
  if(teams.some(t => t.name.toLowerCase() === name.toLowerCase())) return;
  teams.push({
    id: uid(),
    name,
    w:0,d:0,l:0,
    points:0,
    against:0
  });
  persistTeams();
  renderTeamList();
  renderTeamSelects();
  renderLeaderboard();
}

function persistTeams(){
  localStorage.setItem(TEAM_KEY, JSON.stringify(teams));
}

function renderTeamList(){
  const box = $("team-list");
  if(!box) return;
  box.innerHTML = "";
  teams.forEach(t=>{
    const div = document.createElement("div");
    div.style.display="flex";
    div.style.justifyContent="space-between";
    div.style.marginBottom="6px";
    div.innerHTML = `
      <strong>${t.name}</strong>
      <button class="btn btn-ghost" style="color:red">âœ•</button>
    `;
    div.querySelector("button").onclick = ()=>{
      teams = teams.filter(x=>x.id!==t.id);
      matches = matches.filter(m=>m.a!==t.id && m.b!==t.id);
      persistTeams();
      persistMatches();
      renderTeamList();
      renderTeamSelects();
      renderLeaderboard();
    };
    box.appendChild(div);
  });
}

function renderTeamSelects(){
  ["team-a","team-b"].forEach(id=>{
    const sel = $(id);
    if(!sel) return;
    sel.innerHTML = "<option value=''>VÃ¦lg hold</option>";
    teams.forEach(t=>{
      const o = document.createElement("option");
      o.value = t.id;
      o.textContent = t.name;
      sel.appendChild(o);
    });
  });
}

/* =========================================================
   MATCHES
   ========================================================= */
function addMatch(a,b,sa,sb){
  if(!a || !b || a===b) return;
  matches.push({
    id: uid(),
    a,b,
    sa:Number(sa), sb:Number(sb)
  });
  persistMatches();
  recalcStats();
}

function persistMatches(){
  localStorage.setItem(MATCH_KEY, JSON.stringify(matches));
}

function recalcStats(){
  teams.forEach(t=>{
    t.w=t.d=t.l=t.points=t.against=0;
  });

  matches.forEach(m=>{
    const A = teams.find(t=>t.id===m.a);
    const B = teams.find(t=>t.id===m.b);
    if(!A||!B) return;

    A.points += m.sa;
    A.against += m.sb;
    B.points += m.sb;
    B.against += m.sa;

    if(m.sa > m.sb){ A.w++; B.l++; }
    else if(m.sa < m.sb){ B.w++; A.l++; }
    else { A.d++; B.d++; }
  });

  persistTeams();
  renderLeaderboard();
}

/* =========================================================
   LEADERBOARD
   ========================================================= */
function sortTeams(){
  return [...teams].sort((a,b)=>{
    if(sortMode==="wins"){
      return (b.w-a.w) || (b.d-a.d) || (b.points-a.points) || ((b.points-b.against)-(a.points-a.against));
    } else {
      return (b.points-a.points) || (b.w-a.w) || ((b.points-b.against)-(a.points-a.against));
    }
  });
}

function renderLeaderboard(){
  const box = $("leaderboard");
  if(!box) return;
  const list = sortTeams();
  let html = `
  <table>
    <tr>
      <th>Hold</th>
      <th>W</th>
      <th>D</th>
      <th>L</th>
      <th>+</th>
      <th>-</th>
      <th>Diff</th>
    </tr>`;
  list.forEach(t=>{
    html += `
    <tr>
      <td>${t.name}</td>
      <td>${t.w}</td>
      <td>${t.d}</td>
      <td>${t.l}</td>
      <td>${t.points}</td>
      <td>${t.against}</td>
      <td>${t.points - t.against}</td>
    </tr>`;
  });
  html += "</table>";
  box.innerHTML = html;
}

/* =========================================================
   EVENTS (HOOKS FROM DEL 1)
   ========================================================= */
document.addEventListener("click", e=>{
  if(e.target.id==="add-team"){
    addTeam($("team-name").value.trim());
    $("team-name").value="";
  }
  if(e.target.id==="add-match"){
    addMatch(
      $("team-a").value,
      $("team-b").value,
      $("score-a").value,
      $("score-b").value
    );
    $("score-a").value="";
    $("score-b").value="";
  }
});

document.getElementById("sort-mode")?.addEventListener("change",e=>{
  sortMode = e.target.value;
  localStorage.setItem(SORT_KEY,sortMode);
  renderLeaderboard();
});
</script>

<script>
/* =========================================================
   LEZGO TOURNAMENT â€“ FINAL RESULT + EXPORT (DEL 3)
   ========================================================= */

/* ---------- FINAL RESULT ---------- */
function openFinalResult(){
  const sorted = sortTeams();
  const typeKey = localStorage.getItem("lezgo_tournament_type") || "";
  const typeObj = (typeof TYPES !== "undefined")
    ? TYPES.find(t=>t.key===typeKey)
    : null;

  const title = typeObj ? typeObj.title : "Tournament";
  const desc  = typeObj ? typeObj.desc : "";
  const date  = new Date().toLocaleDateString("da-DK");

  let html = `
  <!doctype html>
  <html lang="da">
  <head>
    <meta charset="utf-8">
    <title>${title} â€“ Resultat</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body{
        font-family:Inter,system-ui,Arial,sans-serif;
        background:#071226;
        color:#e6eef6;
        padding:24px
      }
      .wrap{max-width:900px;margin:0 auto}
      h1{margin:0 0 6px}
      p{color:#9aa7b3;margin:0 0 20px}
      table{width:100%;border-collapse:collapse;font-size:14px}
      th,td{padding:8px;border-bottom:1px solid rgba(255,255,255,.08);text-align:center}
      th:first-child,td:first-child{text-align:left}
      tr:nth-child(1) td{font-weight:800;color:#22c55e}
      tr:nth-child(2) td{font-weight:700}
      tr:nth-child(3) td{font-weight:700}
      footer{margin-top:24px;color:#9aa7b3;font-size:12px}
      @media print{
        body{background:#fff;color:#000}
        p,footer{color:#333}
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>${title}</h1>
      <p>${desc}<br>Dato: ${date}</p>

      <table>
        <tr>
          <th>#</th>
          <th>Hold</th>
          <th>W</th>
          <th>D</th>
          <th>L</th>
          <th>+</th>
          <th>-</th>
          <th>Diff</th>
        </tr>
  `;

  sorted.forEach((t,i)=>{
    html += `
      <tr>
        <td>${i+1}</td>
        <td>${t.name}</td>
        <td>${t.w}</td>
        <td>${t.d}</td>
        <td>${t.l}</td>
        <td>${t.points}</td>
        <td>${t.against}</td>
        <td>${t.points - t.against}</td>
      </tr>
    `;
  });

  html += `
      </table>

      <footer>
        Genereret med LezGo Padel Â· Tournament Module
      </footer>
    </div>
  </body>
  </html>
  `;

  const w = window.open();
  if(!w){ alert("Popup blokeret"); return; }
  w.document.open();
  w.document.write(html);
  w.document.close();
}

/* ---------- TOURNAMENT TYPE HOOKS (READY) ---------- */
/*
  Her er strukturen klar til videre udvidelse:

  normal_americano:
    - Alle spiller med alle Ã©n gang

  mix_americano:
    - Valider mand/kvinde pr. hold

  mexicano:
    - NÃ¦ste kamp genereres ud fra leaderboard

  mixicano:
    - Mexicano + mix-validering

  super_mexicano:
    - Bonuspoint tÃ¦t pÃ¥ vinder-score

  team_americano:
    - Faste hold, round-robin

  team_mexicano:
    - Mexicano med faste hold

  club_team_americano:
    - Klub A vs Klub B (krydsvis)

  ðŸ‘‰ Logik kan bygges oven pÃ¥ matches[] og teams[]
*/

/* ---------- BUTTON HOOK ---------- */
document.getElementById("open-final")?.addEventListener("click", openFinalResult);
</script>

<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>LezGo Padel â€” Training Bank & Tournament</title>
<meta name="theme-color" content="#0f1720" id="meta-theme-color" />

<style>
/* ================== BASE ================== */
*,*::before,*::after{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:Inter,system-ui,Arial,sans-serif}
:root{
--bg:#0f1720;--bg2:#071226;--panel:#12202a;
--text:#e6eef6;--muted:#9aa7b3;
--accent:#22c55e;--border:rgba(255,255,255,.06)
}
body.light{
--bg:#d1d5db;--bg2:#cbd5e1;--panel:#e5e7eb;
--text:#0b1220;--muted:#374151;
--accent:#16a34a
}
body{
background:linear-gradient(180deg,var(--bg),var(--bg2));
color:var(--text);
padding-bottom:120px;
transition:background .2s,color .2s;
}

/* ================== LAYOUT ================== */
.container{max-width:1100px;margin:0 auto;padding:10px}
header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center}
#logo{height:48px}
#top-controls{justify-self:end;display:flex;gap:8px}

/* ================== BUTTONS ================== */
.btn{
padding:8px 14px;border-radius:999px;
font-weight:800;border:1px solid var(--border);
background:transparent;color:var(--text);
cursor:pointer;white-space:nowrap
}
.btn-primary{
background:var(--accent);
color:#05261a;border:none
}
.btn-ghost{color:var(--muted)}
.card{
background:var(--panel);
border-radius:16px;
padding:16px;
margin-bottom:14px
}

/* ================== TABS ================== */
.tabs{display:flex;gap:8px}
.tab-btn.active{
background:var(--accent);
color:#05261a;border:none
}

/* ================== TOURNAMENT TYPES ================== */
.tournament-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
gap:12px
}
.t-card{
background:rgba(255,255,255,.05);
border-radius:16px;
padding:14px;
cursor:pointer;
border:2px solid transparent;
transition:.15s
}
.t-card:hover{
transform:translateY(-2px);
background:rgba(255,255,255,.08)
}
.t-card.active{
border-color:var(--accent);
box-shadow:0 0 0 2px rgba(34,197,94,.25)
}
.t-card h4{margin:0 0 6px;color:#c7d2fe}
.t-card p{margin:0;font-size:13px;color:var(--muted)}

/* ================== FORMS ================== */
label{font-size:12px;color:var(--muted)}
input,select{
width:100%;padding:12px;border-radius:12px;
border:1px solid var(--border);
background:transparent;color:var(--text)
}

/* ================== TABLE ================== */
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{padding:8px;border-bottom:1px solid var(--border);text-align:center}
th:first-child,td:first-child{text-align:left}
</style>
</head>

<body>
<div class="container">

<header>
<div></div>
<img src="lezgo-logo.svg" id="logo" alt="LEZGO">
<div id="top-controls">
<button id="lang" class="btn btn-ghost">DA</button>
<button id="theme" class="btn">ðŸŒ™</button>
</div>
</header>

<!-- TABS -->
<div class="card tabs">
<button class="btn tab-btn active" data-tab="training">Training Bank</button>
<button class="btn tab-btn" data-tab="tournament">Tournament</button>
</div>

<!-- TRAINING -->
<section id="training">
<div class="card">
<h3>Training Bank</h3>
<p style="color:var(--muted)">Din eksisterende Training Bank er bevaret.</p>
</div>
</section>

<!-- TOURNAMENT -->
<section id="tournament" style="display:none">

<div class="card">
<h3 id="createTitle">Opret turnering</h3>
<label id="typeLabel">VÃ¦lg turneringstype</label>
<select id="typeSelect"></select>
</div>

<div class="card">
<h3 id="typesTitle">Turneringstyper</h3>
<div class="tournament-grid" id="types"></div>
</div>

</section>
</div>

<script>
/* ================== LANGUAGE ================== */
let lang = localStorage.getItem("lezgo_lang") || "da";
const I18 = {
da:{
create:"Opret turnering",
choose:"VÃ¦lg turneringstype",
types:"Turneringstyper",
t:[
["Normal Americano","Alle spiller med alle Ã©n gang"],
["Mix Americano","Hold trÃ¦kkes med Ã©n kvinde og Ã©n mand"],
["Mexicano","Kampe trÃ¦kkes dynamisk efter scoreboard"],
["Mixicano","Som Mexicano men altid mixede hold"],
["Super Mexicano","Ekstra point tÃ¦t pÃ¥ vinderscore"],
["Team Americano","Alle hold spiller mod hinanden Ã©n gang"],
["Team Mexicano","Mexicano med faste hold"],
["Club Team Americano","To klubber konkurrerer krydsvis"]
]
},
en:{
create:"Create tournament",
choose:"Choose tournament type",
types:"Tournament types",
t:[
["Normal Americano","All players play with everyone once"],
["Mix Americano","Teams are drawn with one woman and one man"],
["Mexicano","Matches are drawn dynamically based on the scoreboard"],
["Mixicano","Like Mexicano but always mixed teams"],
["Super Mexicano","Extra points when close to winning score"],
["Team Americano","All teams play each other once"],
["Team Mexicano","Mexicano with fixed teams"],
["Club Team Americano","Two clubs compete crosswise"]
]
}
};

/* ================== THEME & TABS ================== */
document.getElementById("theme").onclick=()=>{
document.body.classList.toggle("light");
};
document.querySelectorAll(".tab-btn").forEach(b=>{
b.onclick=()=>{
document.querySelectorAll(".tab-btn").forEach(x=>x.classList.remove("active"));
b.classList.add("active");
document.getElementById("training").style.display=b.dataset.tab==="training"?"block":"none";
document.getElementById("tournament").style.display=b.dataset.tab==="tournament"?"block":"none";
};
});

/* ================== RENDER ================== */
const typesDiv=document.getElementById("types");
const select=document.getElementById("typeSelect");
let active=localStorage.getItem("lezgo_tournament_type")||"0";

function render(){
const L=I18[lang];
document.getElementById("createTitle").textContent=L.create;
document.getElementById("typeLabel").textContent=L.choose;
document.getElementById("typesTitle").textContent=L.types;

typesDiv.innerHTML="";
select.innerHTML="";
L.t.forEach((t,i)=>{
const o=document.createElement("option");
o.value=i;o.textContent=t[0];
if(i==active) o.selected=true;
select.appendChild(o);

const c=document.createElement("div");
c.className="t-card"+(i==active?" active":"");
c.innerHTML=`<h4>${t[0]}</h4><p>${t[1]}</p>`;
c.onclick=()=>{active=i;localStorage.setItem("lezgo_tournament_type",i);render();};
typesDiv.appendChild(c);
});
}
select.onchange=e=>{active=e.target.value;localStorage.setItem("lezgo_tournament_type",active);render();};

document.getElementById("lang").onclick=()=>{
lang=lang==="da"?"en":"da";
localStorage.setItem("lezgo_lang",lang);
document.getElementById("lang").textContent=lang.toUpperCase();
render();
};

render();
</script>

</body>
</html>
