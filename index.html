<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>LezGo Padel â€” Training Bank & Tournament</title>
<meta name="theme-color" content="#0f1720" />

<style>
/* ===============================
   CORE THEME (samme som din)
================================ */
*,*::before,*::after{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%;font-family:Inter,system-ui,Arial,sans-serif}
:root{
  --bg:#0f1720;
  --panel:#12202a;
  --text:#e6eef6;
  --muted:#9aa7b3;
  --accent:#22c55e;
  --danger:#ef4444;
}
body{
  background:linear-gradient(180deg,#0f1720,#071226);
  color:var(--text);
  padding-bottom:120px;
}
body.light{
  background:linear-gradient(180deg,#caced5,#bfc3cb);
  color:#0b1220;
}
.container{max-width:1100px;margin:auto;padding:10px}

/* ===============================
   HEADER
================================ */
header{
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
}
#logo{
  height:48px;
}
#top-controls{
  justify-self:end;
  display:flex;
  gap:8px;
}
.theme-btn{
  width:36px;height:36px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.1);
  background:var(--panel);
  color:var(--text);
  cursor:pointer;
}

/* ===============================
   TABS
================================ */
.tabs{
  display:flex;
  gap:8px;
  margin:12px 0;
}
.tab-btn{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.1);
  background:var(--panel);
  color:var(--muted);
  cursor:pointer;
  font-weight:700;
}
.tab-btn.active{
  background:var(--accent);
  color:#05261a;
}
.tab{
  display:none;
}
.tab.active{
  display:block;
}

/* ===============================
   CARDS
================================ */
.card{
  background:var(--panel);
  border-radius:12px;
  padding:12px;
  margin-bottom:12px;
  box-shadow:0 10px 28px rgba(0,0,0,.4);
}
label{
  font-size:12px;
  color:var(--muted);
}
input,select{
  width:100%;
  padding:8px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.1);
  background:transparent;
  color:var(--text);
}
button{
  cursor:pointer;
}

/* ===============================
   TABLE (Leaderboard)
================================ */
table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
th,td{
  padding:6px;
  text-align:center;
}
th{
  color:var(--muted);
  border-bottom:1px solid rgba(255,255,255,.1);
}
tr:nth-child(even){
  background:rgba(255,255,255,.02);
}

/* ===============================
   MOBILE
================================ */
@media(max-width:600px){
  table{font-size:12px}
  .tab-btn{font-size:12px}
}
</style>
</head>

<body>
<div class="container">

<header>
  <div></div>
  <div style="text-align:center">
    <img id="logo" src="lezgo-logo.svg" alt="LEZGO">
  </div>
  <div id="top-controls">
    <button id="themeToggle" class="theme-btn">ðŸŒ™</button>
  </div>
</header>

<!-- ===============================
     MAIN TABS
================================ -->
<div class="tabs">
  <button class="tab-btn active" data-tab="training">Training Bank</button>
  <button class="tab-btn" data-tab="tournament">Tournament</button>
</div>

<!-- ===============================
     TRAINING BANK (placeholder â€“ din eksisterende kÃ¸rer videre)
================================ -->
<div id="training" class="tab active">
  <div class="card">
    <h3>Training Bank</h3>
    <p style="color:var(--muted);font-size:13px">
      Din eksisterende Training Bank er uÃ¦ndret og fungerer som fÃ¸r.
    </p>
  </div>
</div>

<!-- ===============================
     TOURNAMENT TAB
================================ -->
<div id="tournament" class="tab">

  <!-- SETTINGS -->
  <div class="card">
    <h3>Turnering â€“ Settings</h3>

    <label>Point for sejr</label>
    <input type="number" id="ptsWin" value="2">

    <label>Point for uafgjort</label>
    <input type="number" id="ptsDraw" value="1">

    <label>Point for nederlag</label>
    <input type="number" id="ptsLoss" value="0">

    <label>SortÃ©r efter</label>
    <select id="rankingMode">
      <option value="wins">Sejre</option>
      <option value="points">Point</option>
    </select>
  </div>

  <!-- TEAMS -->
  <div class="card">
    <h3>Hold</h3>
    <div style="display:flex;gap:6px">
      <input id="teamName" placeholder="Holdnavn">
      <button onclick="addTeam()">âž•</button>
    </div>
    <ul id="teamList" style="margin-top:8px;font-size:13px"></ul>
  </div>

  <!-- MATCH ENTRY -->
  <div class="card">
    <h3>Kamp-resultat</h3>
    <select id="teamA"></select>
    <input type="number" id="scoreA" placeholder="Score A">
    <select id="teamB"></select>
    <input type="number" id="scoreB" placeholder="Score B">
    <button onclick="addMatch()">Gem kamp</button>
  </div>

  <!-- LEADERBOARD -->
  <div class="card">
    <h3>Resultat / Leaderboard</h3>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Hold</th>
          <th>W</th>
          <th>D</th>
          <th>L</th>
          <th>Point</th>
        </tr>
      </thead>
      <tbody id="leaderboard"></tbody>
    </table>
  </div>

</div>
</div>

<script>
/* ===============================
   TOURNAMENT STATE
================================ */
let teams = [];
let matches = [];

let settings = {
  win: 2,
  draw: 1,
  loss: 0,
  ranking: 'wins'
};
/* ===============================
   TAB NAVIGATION
================================ */
document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.tab).classList.add('active');
  });
});

/* ===============================
   THEME TOGGLE
================================ */
const themeToggle = document.getElementById('themeToggle');
const savedTheme = localStorage.getItem('lezgo_theme') || 'dark';
if(savedTheme === 'light') document.body.classList.add('light');
themeToggle.textContent = document.body.classList.contains('light') ? 'ðŸŒž' : 'ðŸŒ™';

themeToggle.onclick = ()=>{
  document.body.classList.toggle('light');
  const isLight = document.body.classList.contains('light');
  localStorage.setItem('lezgo_theme', isLight ? 'light' : 'dark');
  themeToggle.textContent = isLight ? 'ðŸŒž' : 'ðŸŒ™';
};

/* ===============================
   SETTINGS
================================ */
const ptsWin = document.getElementById('ptsWin');
const ptsDraw = document.getElementById('ptsDraw');
const ptsLoss = document.getElementById('ptsLoss');
const rankingMode = document.getElementById('rankingMode');

function loadSettings(){
  const s = JSON.parse(localStorage.getItem('tournament_settings')||'{}');
  settings = Object.assign(settings,s);
  ptsWin.value = settings.win;
  ptsDraw.value = settings.draw;
  ptsLoss.value = settings.loss;
  rankingMode.value = settings.ranking;
}
function saveSettings(){
  settings.win = Number(ptsWin.value);
  settings.draw = Number(ptsDraw.value);
  settings.loss = Number(ptsLoss.value);
  settings.ranking = rankingMode.value;
  localStorage.setItem('tournament_settings',JSON.stringify(settings));
  renderLeaderboard();
}
[ptsWin,ptsDraw,ptsLoss,rankingMode].forEach(el=>el.onchange=saveSettings);

/* ===============================
   TEAMS
================================ */
function addTeam(){
  const name = document.getElementById('teamName').value.trim();
  if(!name) return;
  teams.push({
    id: crypto.randomUUID(),
    name,
    wins:0,draws:0,losses:0,
    points:0, scored:0, conceded:0
  });
  document.getElementById('teamName').value='';
  saveData();
  refreshTeams();
}
function refreshTeams(){
  const ul = document.getElementById('teamList');
  ul.innerHTML='';
  teams.forEach(t=>{
    const li=document.createElement('li');
    li.textContent=t.name;
    ul.appendChild(li);
  });
  updateTeamSelects();
  renderLeaderboard();
}
function updateTeamSelects(){
  const a=document.getElementById('teamA');
  const b=document.getElementById('teamB');
  a.innerHTML=''; b.innerHTML='';
  teams.forEach(t=>{
    a.add(new Option(t.name,t.id));
    b.add(new Option(t.name,t.id));
  });
}

/* ===============================
   MATCHES
================================ */
function addMatch(){
  const aId = teamA.value;
  const bId = teamB.value;
  const sa = Number(scoreA.value);
  const sb = Number(scoreB.value);
  if(aId===bId) return alert('VÃ¦lg to forskellige hold');

  const A = teams.find(t=>t.id===aId);
  const B = teams.find(t=>t.id===bId);

  A.scored+=sa; A.conceded+=sb;
  B.scored+=sb; B.conceded+=sa;

  if(sa>sb){
    A.wins++; B.losses++;
    A.points+=settings.win;
    B.points+=settings.loss;
  }else if(sa<sb){
    B.wins++; A.losses++;
    B.points+=settings.win;
    A.points+=settings.loss;
  }else{
    A.draws++; B.draws++;
    A.points+=settings.draw;
    B.points+=settings.draw;
  }

  matches.push({aId,bId,sa,sb});
  scoreA.value=''; scoreB.value='';
  saveData();
  renderLeaderboard();
}

/* ===============================
   LEADERBOARD
================================ */
function renderLeaderboard(){
  const tbody = document.getElementById('leaderboard');
  tbody.innerHTML='';

  const sorted=[...teams].sort((a,b)=>{
    if(settings.ranking==='wins'){
      if(b.wins!==a.wins) return b.wins-a.wins;
      if(b.draws!==a.draws) return b.draws-a.draws;
    }else{
      if(b.points!==a.points) return b.points-a.points;
      if(b.wins!==a.wins) return b.wins-a.wins;
    }
    return (b.scored-b.conceded)-(a.scored-a.conceded);
  });

  sorted.forEach((t,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td>${i+1}</td>
      <td style="text-align:left">${t.name}</td>
      <td>${t.wins}</td>
      <td>${t.draws}</td>
      <td>${t.losses}</td>
      <td>${t.points}</td>
    `;
    tbody.appendChild(tr);
  });
}

/* ===============================
   STORAGE
================================ */
function saveData(){
  localStorage.setItem('tournament_teams',JSON.stringify(teams));
  localStorage.setItem('tournament_matches',JSON.stringify(matches));
}
function loadData(){
  teams = JSON.parse(localStorage.getItem('tournament_teams')||'[]');
  matches = JSON.parse(localStorage.getItem('tournament_matches')||'[]');
  loadSettings();
  refreshTeams();
}

/* ===============================
   INIT
================================ */
loadData();
</script>
</body>
</html>
