<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>LezGo Padel â€” Training Bank</title>
<meta name="theme-color" content="#0f1720" id="meta-theme-color" />

<style>
/* =====================
   BASE / THEME
===================== */
*,*::before,*::after{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:Inter,system-ui,Arial,sans-serif}
:root{
--bg-top:#0f1720;
--bg-bottom:#071226;
--panel:#12202a;
--text:#e6eef6;
--muted:#9aa7b3;
--accent:#22c55e;
--danger:#ef4444;
--border-soft:rgba(255,255,255,.06);
--small:12px;
}
body{
background:linear-gradient(180deg,var(--bg-top),var(--bg-bottom));
color:var(--text);
padding-bottom:120px;
}
body.light{
--bg-top:#caced5;
--bg-bottom:#bfc3cb;
--panel:#d8dce3;
--text:#0b1220;
--muted:#3c4652;
--accent:#16a34a;
}

/* =====================
   LAYOUT
===================== */
.container{max-width:1100px;margin:auto;padding:10px}
.card{
background:var(--panel);
border-radius:12px;
padding:12px;
margin-bottom:12px;
box-shadow:0 10px 28px rgba(0,0,0,.35)
}
header{
display:grid;
grid-template-columns:1fr auto 1fr;
align-items:center;
margin-bottom:10px
}
#logo{height:48px}
#top-controls{
justify-self:end;
display:flex;
gap:8px
}
.theme-btn{
border:1px solid var(--border-soft);
background:transparent;
border-radius:8px;
padding:6px 10px;
cursor:pointer
}
select,input,button{
background:transparent;
border:1px solid var(--border-soft);
border-radius:8px;
color:var(--text);
padding:8px;
font-size:var(--small)
}
button{cursor:pointer}
.btn-primary{
background:var(--accent);
color:#05261a;
font-weight:700
}
.btn-ghost{color:var(--muted)}
h3{margin:0 0 10px}

/* =====================
   TABS
===================== */
.tab-bar{
display:flex;
gap:6px;
flex-wrap:wrap
}
.tab-btn{
padding:6px 10px;
border-radius:8px;
border:1px solid var(--border-soft);
background:transparent;
color:var(--muted)
}
.tab-btn.active{
background:var(--accent);
color:#05261a;
border-color:transparent
}

/* =====================
   TABLE
===================== */
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{
padding:6px 4px;
border-bottom:1px solid var(--border-soft);
text-align:left
}
th{color:var(--muted)}

/* =====================
   TOURNAMENT
===================== */
#teams-list>div{
display:flex;
gap:8px;
margin-bottom:6px
}
.two-col{
display:grid;
grid-template-columns:1fr 1fr;
gap:10px
}
@media(max-width:800px){
.two-col{grid-template-columns:1fr}
}

/* =====================
   HIDE
===================== */
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<header>
<div></div>
<div style="text-align:center">
<img id="logo" src="lezgo-logo.svg" alt="LEZGO">
</div>
<div id="top-controls">
<button class="theme-btn" id="theme-toggle">ðŸŒ™</button>
</div>
</header>

<!-- TABS -->
<div class="card">
<div class="tab-bar">
<button class="tab-btn active" id="tab-training">Training Bank</button>
<button class="tab-btn" id="tab-tournament">Tournament</button>
</div>
</div>

<!-- ================= TRAINING BANK (placeholder) ================= -->
<section id="training-view">
<div class="card">
<h3>Training Bank</h3>
<p style="color:var(--muted)">
Din eksisterende Training Bank-logik tilfÃ¸jes i <strong>DEL 2</strong>.
</p>
</div>
</section>

<!-- ================= TOURNAMENT ================= -->
<section id="tournament-view" class="hidden">

<!-- Settings -->
<div class="card">
<h3>Tournament Settings</h3>
<div class="two-col">
<div>
<label>Point for sejr</label>
<input id="set-win" type="number" value="2">
<label>Point for uafgjort</label>
<input id="set-draw" type="number" value="1">
<label>Point for nederlag</label>
<input id="set-loss" type="number" value="0">
</div>
<div>
<label>Standard sortering</label>
<select id="set-sort">
<option value="wins">Sejre â†’ Uafgjort â†’ Point â†’ Diff</option>
<option value="points">Point â†’ Sejre â†’ Diff</option>
</select>
</div>
</div>
</div>

<!-- Teams -->
<div class="card">
<h3>Hold</h3>
<div id="teams-list"></div>
<button class="btn-ghost" id="add-team">+ TilfÃ¸j hold</button>
<button class="btn-ghost" id="reset-teams" style="color:var(--danger)">Nulstil</button>
</div>

<!-- Match -->
<div class="card">
<h3>Kamp</h3>
<div class="two-col">
<div>
<label>Hold A</label>
<select id="match-a"></select>
<label>Score</label>
<input id="score-a" type="number" placeholder="6">
</div>
<div>
<label>Hold B</label>
<select id="match-b"></select>
<label>Score</label>
<input id="score-b" type="number" placeholder="4">
</div>
</div>
<button class="btn-primary" id="add-match" style="margin-top:10px">
Gem kamp
</button>
</div>

<!-- Leaderboard -->
<div class="card">
<div style="display:flex;justify-content:space-between;align-items:center">
<h3>Live Leaderboard</h3>
<select id="leaderboard-sort">
<option value="wins">Sejre fÃ¸rst</option>
<option value="points">Point fÃ¸rst</option>
</select>
</div>
<table>
<thead>
<tr>
<th>Hold</th>
<th>W</th>
<th>D</th>
<th>L</th>
<th>Point</th>
<th>Imod</th>
<th>Diff</th>
</tr>
</thead>
<tbody id="leaderboard-body"></tbody>
</table>
</div>

<!-- Final -->
<div class="card">
<button class="btn-primary" id="open-final">
Vis slutresultat
</button>
</div>

</section>

</div>
</body>
</html>
<script>
/* =====================================================
   LEZGO TRAINING BANK â€“ CORE
===================================================== */

const TB_KEY = "lezgo_training_v1";
const THEME_KEY = "lezgo_theme_v1";

let exercises = [];

/* ---------- INIT ---------- */
document.addEventListener("DOMContentLoaded", () => {
  loadTheme();
  loadExercises();
  bindCoreUI();
});

/* ---------- THEME ---------- */
function loadTheme(){
  const t = localStorage.getItem(THEME_KEY) || "dark";
  if(t === "light"){
    document.body.classList.add("light");
    document.getElementById("theme-toggle").textContent = "ðŸŒž";
  }
}
document.getElementById("theme-toggle").onclick = () => {
  document.body.classList.toggle("light");
  const isLight = document.body.classList.contains("light");
  document.getElementById("theme-toggle").textContent = isLight ? "ðŸŒž" : "ðŸŒ™";
  localStorage.setItem(THEME_KEY, isLight ? "light" : "dark");
};

/* ---------- STORAGE ---------- */
function loadExercises(){
  exercises = JSON.parse(localStorage.getItem(TB_KEY) || "[]");
}
function saveExercises(){
  localStorage.setItem(TB_KEY, JSON.stringify(exercises));
}

/* ---------- BASIC UI ---------- */
function bindCoreUI(){

  // Tabs
  document.getElementById("tab-training").onclick = () => {
    setTab("training");
  };
  document.getElementById("tab-tournament").onclick = () => {
    setTab("tournament");
  };

}

/* ---------- TAB SWITCH ---------- */
function setTab(tab){
  document.getElementById("training-view").classList.add("hidden");
  document.getElementById("tournament-view").classList.add("hidden");
  document.getElementById("tab-training").classList.remove("active");
  document.getElementById("tab-tournament").classList.remove("active");

  if(tab === "training"){
    document.getElementById("training-view").classList.remove("hidden");
    document.getElementById("tab-training").classList.add("active");
  } else {
    document.getElementById("tournament-view").classList.remove("hidden");
    document.getElementById("tab-tournament").classList.add("active");
  }
}

/* =====================================================
   PLACEHOLDER â€“ TRAINING CONTENT
   (din fulde tidligere TB-UI kan nemt flettes her)
===================================================== */

</script>
<script>
/* =====================================================
   LEZGO TOURNAMENT ENGINE
===================================================== */

const T_KEY = "lezgo_tournament_v1";

/* ---------- STATE ---------- */
let tournament = {
  settings: {
    win: 2,
    draw: 1,
    loss: 0,
    sort: "wins"
  },
  teams: [],
  matches: []
};

/* ---------- INIT ---------- */
document.addEventListener("DOMContentLoaded", () => {
  loadTournament();
  bindTournamentUI();
  renderTeams();
  renderTeamSelects();
  renderLeaderboard();
});

/* ---------- STORAGE ---------- */
function loadTournament(){
  const data = localStorage.getItem(T_KEY);
  if(data){
    tournament = JSON.parse(data);
  }
  // sync settings UI
  setVal("set-win", tournament.settings.win);
  setVal("set-draw", tournament.settings.draw);
  setVal("set-loss", tournament.settings.loss);
  setVal("set-sort", tournament.settings.sort);
}
function saveTournament(){
  localStorage.setItem(T_KEY, JSON.stringify(tournament));
}

/* ---------- HELPERS ---------- */
function setVal(id,val){
  const el = document.getElementById(id);
  if(el) el.value = val;
}
function uid(){
  return "t_" + Math.random().toString(36).slice(2,9);
}

/* ---------- BIND UI ---------- */
function bindTournamentUI(){

  // settings
  ["set-win","set-draw","set-loss","set-sort"].forEach(id=>{
    document.getElementById(id).addEventListener("change", ()=>{
      tournament.settings.win = Number(getVal("set-win"));
      tournament.settings.draw = Number(getVal("set-draw"));
      tournament.settings.loss = Number(getVal("set-loss"));
      tournament.settings.sort = getVal("set-sort");
      saveTournament();
      renderLeaderboard();
    });
  });

  document.getElementById("leaderboard-sort").addEventListener("change", e=>{
    tournament.settings.sort = e.target.value;
    saveTournament();
    renderLeaderboard();
  });

  // teams
  document.getElementById("add-team").onclick = addTeam;
  document.getElementById("reset-teams").onclick = resetTournament;

  // match
  document.getElementById("add-match").onclick = addMatch;

  // final
  document.getElementById("open-final").onclick = openFinalResult;
}

function getVal(id){
  return document.getElementById(id).value;
}

/* ---------- TEAMS ---------- */
function addTeam(){
  tournament.teams.push({
    id: uid(),
    name: "Nyt hold"
  });
  saveTournament();
  renderTeams();
  renderTeamSelects();
}

function renderTeams(){
  const box = document.getElementById("teams-list");
  box.innerHTML = "";
  tournament.teams.forEach(t=>{
    const row = document.createElement("div");
    const input = document.createElement("input");
    input.value = t.name;
    input.oninput = ()=>{
      t.name = input.value;
      saveTournament();
      renderTeamSelects();
      renderLeaderboard();
    };
    const del = document.createElement("button");
    del.textContent = "âœ•";
    del.style.color = "var(--danger)";
    del.onclick = ()=>{
      tournament.teams = tournament.teams.filter(x=>x.id!==t.id);
      tournament.matches = tournament.matches.filter(m=>m.a!==t.id && m.b!==t.id);
      saveTournament();
      renderTeams();
      renderTeamSelects();
      renderLeaderboard();
    };
    row.appendChild(input);
    row.appendChild(del);
    box.appendChild(row);
  });
}

function renderTeamSelects(){
  const a = document.getElementById("match-a");
  const b = document.getElementById("match-b");
  a.innerHTML = "";
  b.innerHTML = "";
  tournament.teams.forEach(t=>{
    const o1 = document.createElement("option");
    o1.value = t.id;
    o1.textContent = t.name;
    const o2 = o1.cloneNode(true);
    a.appendChild(o1);
    b.appendChild(o2);
  });
}

/* ---------- MATCHES ---------- */
function addMatch(){
  const a = getVal("match-a");
  const b = getVal("match-b");
  const sa = Number(getVal("score-a"));
  const sb = Number(getVal("score-b"));
  if(!a || !b || a===b) return alert("VÃ¦lg to forskellige hold");
  if(isNaN(sa) || isNaN(sb)) return alert("Indtast score");

  tournament.matches.push({a,b,sa,sb});
  saveTournament();
  document.getElementById("score-a").value="";
  document.getElementById("score-b").value="";
  renderLeaderboard();
}

/* ---------- LEADERBOARD ---------- */
function renderLeaderboard(){
  const body = document.getElementById("leaderboard-body");
  body.innerHTML = "";

  const stats = {};
  tournament.teams.forEach(t=>{
    stats[t.id] = {
      name: t.name,
      w:0,d:0,l:0,
      pts:0,
      against:0,
      diff:0
    };
  });

  tournament.matches.forEach(m=>{
    const A = stats[m.a];
    const B = stats[m.b];
    if(!A||!B) return;

    A.against += m.sb;
    B.against += m.sa;
    A.diff += (m.sa - m.sb);
    B.diff += (m.sb - m.sa);

    if(m.sa > m.sb){
      A.w++; B.l++;
      A.pts += tournament.settings.win;
      B.pts += tournament.settings.loss;
    } else if(m.sa < m.sb){
      B.w++; A.l++;
      B.pts += tournament.settings.win;
      A.pts += tournament.settings.loss;
    } else {
      A.d++; B.d++;
      A.pts += tournament.settings.draw;
      B.pts += tournament.settings.draw;
    }
  });

  let rows = Object.values(stats);

  rows.sort((x,y)=>{
    if(tournament.settings.sort === "points"){
      if(y.pts !== x.pts) return y.pts - x.pts;
      if(y.w !== x.w) return y.w - x.w;
      return y.diff - x.diff;
    } else {
      if(y.w !== x.w) return y.w - x.w;
      if(y.d !== x.d) return y.d - x.d;
      if(y.pts !== x.pts) return y.pts - x.pts;
      return y.diff - x.diff;
    }
  });

  rows.forEach(r=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${r.name}</td>
      <td>${r.w}</td>
      <td>${r.d}</td>
      <td>${r.l}</td>
      <td>${r.pts}</td>
      <td>${r.against}</td>
      <td>${r.diff}</td>
    `;
    body.appendChild(tr);
  });
}

/* ---------- RESET ---------- */
function resetTournament(){
  if(!confirm("Nulstil hele turneringen?")) return;
  tournament = {
    settings:{win:2,draw:1,loss:0,sort:"wins"},
    teams:[],
    matches:[]
  };
  saveTournament();
  renderTeams();
  renderTeamSelects();
  renderLeaderboard();
}

/* ---------- FINAL RESULT ---------- */
function openFinalResult(){
  let html = `
  <!doctype html>
  <html><head><meta charset="utf-8">
  <title>Slutresultat</title>
  <style>
  body{font-family:sans-serif;background:#071226;color:#e6eef6;padding:20px}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px solid #333}
  </style></head><body>
  <h2>Slutresultat</h2>
  <table>
  <tr><th>Hold</th><th>W</th><th>D</th><th>L</th><th>Point</th><th>Diff</th></tr>
  `;
  document.querySelectorAll("#leaderboard-body tr").forEach(tr=>{
    html += `<tr>${tr.innerHTML}</tr>`;
  });
  html += "</table></body></html>";
  const w = window.open();
  if(!w) return alert("Popup blokeret");
  w.document.write(html);
  w.document.close();
}
</script>
